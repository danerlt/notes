# vim常用命令


## 基本介绍

`vim` 是从 `vi` 发展出来的一个 **文本编辑器** ，可以理解为升级版本的 `Vi` ，功能更强大。其代码补完、编译及错误跳转等方便编程的功能特别丰富，在程序员中被广泛使用。

`vi`适用于文本编辑，但是 `vim` 更适用于 `coding`。并且`vim` 完全兼容 `vi`。

所有的`类 Unix` 系统都会内置 `vi` 文本编辑器，但不一定有 `vim`，如果没有的话，需要我们命令安装一下：

```bash
 yum -y install vim*             # CentOS 系统
 sudo apt-get install vim-gtk    # Ubuntu 系统
```

基本上 `vi/vim` 共分为三种模式，分别是**命令行模式（Command mode）** ，**输入模式（Insert mode）** 和**底线命令模式（Last line mode）** 。

下面我们就详细来看看这三种模式的操作。

![](https://danerlt-1258802437.cos.ap-chongqing.myqcloud.com/2023-04-27-9GPQRA.png)


## 命令行模式

也称为交互模式，这是 `vim` 的默认模式，每次使用 `vim` 命令编辑文件的时候，就会先进入这个模式。

```bash
 vim config.txt
```

特征：

-   在这个模式下，你不能输入文本；
-   它可以让我们在文本间移动，删除一行文本，复制黏贴文本，跳转到指定行，撤销操作，等等。

字符移动命令
```
h 将光标向左移动一格

j 将光标向下移动一格

k 将光标向上移动一格

l 将光标向右移动一格
```
为什么`hjkl`表示左下上右，来源自vi的发明者当时所用的键盘，如下图所示：
![](https://danerlt-1258802437.cos.ap-chongqing.myqcloud.com/2023-04-27-zGR5Cp.png)


### 常用命令

| 命令  | 作用                                                                   |
|-----|----------------------------------------------------------------------|
| i   | 切换到输入模式，以输入字符                                                        |
| x   | 删除当前光标所在处的字符                                                         |
| X   | 删除当前光标前一个字符                                                          |
| :   | 切换到底线命令模式，以在最底一行输入命令                                                 |
| gg  | 跳转到文件开头                                                              |
| G   | 跳转到文件末尾                                                              |
| dd  | 删除光标所在一整行数据，且临时存储到缓存区                                                |
| d$  | 删除光标所在行，光标后面的数据                                                      |
| dG  | 删除光标所在行到文件末尾的数据                                              |
| yy  | 复制整行文本到临时缓存区                                                         |
| p   | 将指定缓存区内容放在光标位置之下；整行文本放在行下面，若是非整行文本则放在光标后面                            |
| P   | 将指定缓冲区的内容放到当前光标的位置之上；整行文本放在行下面，若是非整行文本则放在光标后面                        |
| u   | 撤销最近的修改，针对所有修改                                                       |
| U   | 撤销对当前行上做的所有修改                                                        |

### 翻页命令

| 命令     | 作用                               |
| -------- | ---------------------------------- |
| Ctrl + d | 将光标向下翻半屏，通常每次翻屏12行 |
| Ctrl + u | 将光标向上翻半屏，通常每次翻屏12行 |
| Ctrl + f | 将光标向下翻满屏，通常每次翻屏24行 |
| Ctrl + b | 将光标向上翻满屏，通常每次翻屏24行 |

## 输入模式

这个模式是我们熟悉的文本编辑器的模式，就是可以输入任何你想输入的内容。进入这个模式有几种方法，最常用的方法是按字母键 `i` （ `i、I、a、A、o、O` 都可以进入插入模式，只是所处的位置不同），退出这种模式，只需要按下 `Esc` 键。

| 命令 | 作用                                                        |
| ---- | ----------------------------------------------------------- |
| i    | 在光标的`左侧`输入文本，光标右侧文本向右移动                |
| I    | 在光标所在`行的行首`输入文本，相当于在行首执行了 i 命令     |
| a    | 在光标的`右侧`输入文本                                      |
| A    | 在光标所在`行的尾部`进行输入文本，相当于在光标行尾执行a命令 |
| o    | 在光标所在行的`下一行`增添新的一行，光标停留在新行的行首    |
| O    | 在光标所在行的`上一行`增添新的一行，光标停留在新行的行首    |

`输入模式（Insert mode）`没什么可说的了，就是进入了编辑模式，可以自由编辑了。

## 底线命令模式

`vim` 的底线命令模式：在命令模式下按`:`(**注意是英文冒号**)，此时vim的窗口左下方会出现一个`:`符号，这时就已经进入了底线命令模式了。

**注意：** 指令执行之后会把自动返回到命令行模式的。

**作用：** 底线命令模式可以对文件中指定的内容进行保存、替换、查询、删除等等操作。

### 常用命令

| 命令                    | 作用                                                         |
|-----------------------| ------------------------------------------------------------ |
| :q                    | 退出 `vim` 编辑器                                            |
| :q!                   | 不保存文件，直接退出 `vim` 编辑器                            |
| :w                    | 只保存文件，但不退出 `vim` 编辑器                            |
| :wq                   | 保存文件且退出 `vim` 编辑器                                  |
| ZZ                    | 保存文件且退出 `vim` 编辑器                                  |
| :`start`,`endd`       | 从第 start 行开始到 end 行进行删除操作 最后一个 d 表示删除，如 `:3,4d` |
| :%d                   | 清空文件内容(跳到行首 dG 执行也可删除)                       |
| :/`string`            | 从文件首部开始查找到尾部；按 n 键可以跳到下一个，N 上一个，另外按 / 键后，按上下键可以找到以前查找的记录，同样的也有记录 |
| :?`string`            | 同上，从当前光标向文件首部查找                               |
| :%s/`word1`/`word2`/g | 从文件首到尾替换每一行的 word1为 word2                       |
| :set nu               | 显示行号 也可以输入 set number                               |
| :set nonu             | 取消行号                                                     |
| :set ai/noai          | 开启/关闭自动缩进                                            |
| :set paste            | 开启粘贴模式，防止因为格式不同导致的格式错误 |





## 参考链接

- [常用的 Vim 操作命令整理](https://juejin.cn/post/7070699702732783623)
- [程序员必备vim编辑器命令，你想要的我都整理好了(建议收藏)](https://juejin.cn/post/6968252605210296328#heading-4)
- [关于vim——为什么hjkl表示左下上右呢？](https://blog.csdn.net/wjxiz/article/details/44934661)